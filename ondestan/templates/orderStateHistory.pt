<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="Ondestan" metal:use-macro="load: main.pt">

  <div metal:fill-slot="head">
    <title i18n:translate="order_state_history_title">Order state history - Ondestán</title>
  </div>

  <div metal:fill-slot="styles">
    <link rel="stylesheet" href="${request.static_url('ondestan:static/css/main.css')}" />
  </div>

  <div class="container" metal:fill-slot="content">

    <div class="header">
      <ul class="nav navbar-nav pull-right">
        <li class="dropdown active">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">${user_id} <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="${request.route_url('update_profile')}" i18n:translate="update_profile">Update profile</a></li>
            <li><a href="${request.route_url('logout')}" i18n:translate="logout">Logout</a></li>
          </ul>
        </li>
      </ul>
      <h3 class="text-muted"><a href="${request.route_url('default')}">Onde Están</a></h3>
    </div>

    <h3 i18n:translate="order_state_history">Order state history</h3>


    <table class="table table-bordered table-hover">
      <tr>
        <th i18n:translate="order_state">Order state</th>
        <th i18n:translate="change_date">Change date</th>
      </tr>
      <?python from babel.dates import format_datetime; from pyramid.i18n import get_locale_name; ?>
      <tr tal:repeat="state order.states">
        <td>
          <tal:block tal:switch="state.state">
            <tal:block tal:case="0" i18n:translate="order_state_0">Awaiting</tal:block>
            <tal:block tal:case="1" i18n:translate="order_state_1">In process</tal:block>
            <tal:block tal:case="2" i18n:translate="order_state_2">Dispatched</tal:block>
            <tal:block tal:case="3" i18n:translate="order_state_3">Activated</tal:block>
          </tal:block>
        </td>
        <td tal:content="format_datetime(state.date, format='short', locale=get_locale_name(request))"/>
      </tr>
    </table>


  </div>

  <div metal:fill-slot="javascript">
    <script type="text/javascript" src="${request.static_url('ondestan:static/js/lib/jquery-1.8.2.min.js')}"></script>
    <script type="text/javascript" src="${request.static_url('ondestan:static/bootstrap-3.1.1-dist/js/bootstrap.js')}"></script>
  </div>

</html>
