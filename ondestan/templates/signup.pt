<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="Ondestan" metal:use-macro="load: main.pt">

	<div metal:fill-slot="head">
    	<title i18n:translate="sign_up_title">Sign Up - Ondestán</title>
		<script type="text/javascript">
			function checkFields() {
				login = document.getElementById('login').value;
				name = document.getElementById('name').value;
				email = document.getElementById('email').value;
				pass1 = document.getElementById('password1').value;
				pass2 = document.getElementById('password2').value;
				document.getElementById('submit').disabled = ((pass1 != pass2) || (pass1 == '') || (login == '') || (name == '') || (email == ''));
				if (pass1 != '') {
		 		if (pass1.length < 6) {
		 			document.getElementById('passtooshort').style.display="";
		 			document.getElementById('passdistinct').style.display="none";
		 		} else {
		 			document.getElementById('passtooshort').style.display="none";
		  		if ((pass2 != '') && (pass1 != pass2)) {
		  			document.getElementById('passdistinct').style.display="";
		  		} else {
		  			document.getElementById('passdistinct').style.display="none";
		  		}
		 		}
				}
			}
		</script>
	</div>
	
	<div metal:fill-slot="content">
	    <div id="middle">
	      <div class="middle align-right" tal:switch="'form.submitted' in request.params and message == ''">
	        <div id="left" class="app-welcome align-left" tal:case="True">
	      	  <b><label i18n:translate="successful_sign_up">Successful Sign Up</label></b>
	        </div>
	        <div id="left" class="app-welcome align-left" tal:case="False">
	          <b><label i18n:translate="sign_up">Sign Up</label></b><br/>
	          <span tal:replace="message"/>
	        </div>
	        <div id="right" class="app-welcome align-right"></div>
	      </div>
	    </div>
	    <div id="bottom" tal:switch="'form.submitted' in request.params and message == ''">
	      <div class="bottom" tal:case="True">
	      	<label i18n:translate="sign_up_instructions">We have sent you an email with the instructions for activating your new account.<br/>Welcome to Ondestán!!</label>
	      </div>
	      <div class="bottom" tal:case="False">
	      	<label>*</label><label i18n:translate="mandatory_fields">Mandatory fields</label>
	        <form action="${url}" method="post">
		        <table>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="username">Login</label>:</td><td><input type="text" id="login" name="login" value="${login}" onkeyup="checkFields()"/>*</td></tr>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="name">Name</label>:</td><td><input type="text" id="name" name="name" value="${name}" onkeyup="checkFields()"/>*</td></tr>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="email">Email</label>:</td><td><input type="text" id="email" name="email" value="${email}" onkeyup="checkFields()"/>*</td></tr>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="cell_phone_number">Cell phone number</label>:</td><td><input type="text" id="phone" name="phone" value="${phone}"/></td></tr>
		          <tr><td colspan="2"><label id="passtooshort" style="display: none;" i18n:translate="password_too_short">Password must be at least 6 chars</label><label id="passdistinct" style="display: none;" i18n:translate="passwords_dont_match">Passwords don't match</label></td><td><br/></td></tr>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="password">Password</label>:</td><td><input type="password" id="password1" name="password" onkeyup="checkFields()"/>*</td></tr>
		          <tr><td align="right" style="padding-right:10px"><label i18n:translate="retype_password">Retype password</label>:</td><td><input type="password" id="password2" onkeyup="checkFields()"/>*</td></tr>
		          <tr><td></td><td align="right"><input disabled="disabled" id="submit" type="submit" name="form.submitted" i18n:attributes="value sign_up" value="Sign Up"/></td></tr>
	          </table>
	        </form>
	      </div>
	    </div>
	</div>

</html>
