<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="Ondestan" metal:use-macro="load: main.pt">

  <tal:block metal:fill-slot="head">
    <title i18n:translate="simple_viewer_title">Viewer - Ondest√°n</title>
  </tal:block>

  <tal:block metal:fill-slot="styles">
    <link rel="stylesheet" href="${request.static_url('ondestan:static/styles/leaflet.css')}" />
  </tal:block>

  <tal:block metal:fill-slot="javascript">
    <script type="text/javascript">
      window.contextVariables.animals_json_url = "${request.route_url('json_animals')}";
      window.contextVariables.plots_json_url = "${request.route_url('json_plots')}";
      window.contextVariables.orders_popover_content = "${orders_popover_content}";
      window.contextVariables.activate_device_msg = "<tal:block i18n:translate="activate">Activate</tal:block>";
      window.contextVariables.deactivate_device_msg = "<tal:block i18n:translate="deactivate">Deactivate</tal:block>";
      window.contextVariables.activate_device_url = "${request.route_url('activate_device', device_id='__device_id__')}";
      window.contextVariables.deactivate_device_url = "${request.route_url('deactivate_device', device_id='__device_id__')}";
      window.contextVariables.update_animal_name_url = "${request.route_url('update_animal_name')}";
      window.contextVariables.edit_image_tooltip = "<tal:block i18n:translate="edit_animal_name_tooltip">Activate</tal:block>";
    </script>
    <script type="text/javascript" src="${request.static_url('ondestan:static/js/lib/leaflet.js')}"></script>
    <script type="text/javascript" src="${request.static_url('ondestan:static/js/lib/leaflet.ajax.min.js')}"></script>
    <script type="text/javascript" src="${request.static_url('ondestan:static/js/simpleViewer.js')}"></script>
  </tal:block>

  <tal:block metal:fill-slot="content">
  

    <div class="row data">

	  	<div tal:condition="len(notifications) > 0" class="alerts-panel">
	  		<tal:block tal:repeat="notification notifications">
	  			${notification.get_html(request)}
	  		</tal:block>
		</div>

      <div class="col-md-4 text-center">
        <h5 class="text-muted" i18n:translate="dashboard_active">ACTIVE</h5>
        <a href="#" id="active_devices" disabled="disabled">-</a>
      </div>
      <div class="col-md-4 text-center">
        <h5 class="text-muted" i18n:translate="dashboard_inactive">INACTIVE</h5>
        <a href="#" id="inactive_devices" disabled="disabled">-</a>
      </div>
      <div class="col-md-4 text-center">
        <h5 class="text-muted" i18n:translate="dashboard_low_battery">LOW BATTERY</h5>
        <a href="#" id="low_battery_devices" disabled="disabled">-</a>
      </div>
    </div>

    <div id="map" class="col-md-12" style="height: 600px"></div>

  </tal:block>

</html>
